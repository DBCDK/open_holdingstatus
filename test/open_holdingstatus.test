<?php

/**
 * @file
 * Test case for OpenHldingsStatus localisation & holdings.
 */

class OpenHoldingstatusWebserviceTestCast extends DrupalWebTestCase {

  public static function getInfo() {
    return array(
      'name' => t('Holdingstatus test'),
      'description' => t('check if holdingstatus webservice is alive'),
      'group' => t('bibliotek.dk'),
    );
  }

  public function setUp() {
    $this->profile = 'bibdk';
    parent::setUp(array('ting_client', 'open_holdingstatus'));
    variable_set('open_holdingstatus_url', 'http://http://openholdingstatus.addi.dk/1.0/');
  }

  public function testWebservice() {
    $response = open_holdingstatus_localisationRequest('870970-basis:28542941','DK-870970',0,'xml');
    $matches = array();
    $pattern = '/localisationsResponse/';
    preg_match($pattern, $response, $matches);
    $this->assertTrue(!empty($matches));
  }
}